app {
  # Override name for local environment
  name = "Avro to Iceberg Conversion - Local"
  master = "local[*]"
  master = ${?SPARK_MASTER_URL}
  create.table = true
  s3.from = "s3a://parquet"

  config {
    spark {
      sql {
        catalog {
          mycatalog {
            def-impl = "org.apache.iceberg.spark.SparkCatalog"
            type = "hadoop"
            warehouse = "s3a://test/warehouse/"
//            catalog-impl = "org.apache.iceberg.hadoop.HadoopCatalog"
//            io-impl = "com.example.FlatFileIO"
          }
        }
      }

      hadoop {
        fs {
          s3a {
            endpoint = "http://localhost:9000"
            endpoint = ${?STORAGE_ENDPOINT}
            access.key = "minioadmin"
            access.key = ${?STORAGE_KEY_ID}
            secret.key = "minioadmin"
            secret.key = ${?STORAGE_KEY_SECRET}
            path.style.access = true
            impl = "org.apache.hadoop.fs.s3a.S3AFileSystem"
            ssl.enabled = false
          }
        }
      }
    }
  }
}